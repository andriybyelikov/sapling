-- iNES Header
-- https://wiki.nesdev.com/w/index.php/INES

fragment ../spec/sample/hex_to_bin
<
    0x4E 0x45 0x53 0x1A 0x01 0x01 0x00 0x00
    0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
>


-- NES init code
-- https://wiki.nesdev.com/w/index.php/Init_code

fragment ../spec/sample/6502_to_bin
<
    .org $C000
reset:
    SEI
    CLD
    LDX #$40
    STX $4017
    LDX #$FF
    TXS
    INX
    STX $2000
    STX $2001
    TXS $4010
    BIT $2002
vwaitforblank1:
    BIT $2002
    BPL 
    TXA
clrmem:
    STA $00,X
    STA $0100,X
    STA $0200,X
    STA $0300,X
    STA $0400,X
    STA $0500,X
    STA $0600,X
    STA $0700,X
    INX
    BNE 
vwaitforblank2:
    BIT $2002
    BPL
nmi:
irq:
    RTI

    .org $FFFA
    .word nmi
    .word reset
    .word irq
>
